project_name: FASHION_CONTEXT_RETRIEVAL

model:
  clip_name: ViT-B-32
  clip_pretrained: laion2B-s34B-b79K
  patch_name: ViT-B-32
  patch_pretrained: laion2b_s34b_b79k
  device: cuda

storage:
  vector_store: chroma
  chroma:
    persist_directory: './FASHION_CONTEXT_DATA/chroma_index'
    collection: fashion_global
  patches_dir: './FASHION_CONTEXT_DATA/patches'
  metadata_db: './FASHION_CONTEXT_DATA/metadata.sqlite'

indexer:
  batch_size: 8
  use_fp16: true
  save_patch_embeddings: true
  save_global_embeddings: true
  top_colors: 5
  clip_color_top_n: 5
  color_palette_weight: 0.6
  garment_top_n: 6
  garment_min_score: 0.12
  garment_patch_weight: 0.7
  default_images_path: './data'
  detector:
    backend: detr
    model_name: facebook/detr-resnet-50
    min_score: 0.6
    top_n: 8
    allowed_labels:
      - tie
      - handbag
      - backpack
      - umbrella
      - suitcase
    local_files_only: false

retriever:
  ann_top_n: 200
  return_top_k: 24
  weights:
    global: 0.25   # w0
    compositional: 0.45   # w1
    color: 0.1     # w2
    env: 0.1       # w3
    garments: 0.1  # w4
  attribute_filters:
    enabled: true
    garment_min_score: 0.12
    garment_match_ratio: 0.5
    garment_match_ratio_strict: 0.8
    color_min_prob: 0.08
    color_match_ratio: 0.5
    color_match_ratio_strict: 0.8
    object_tags_enabled: true
    object_min_score: 0.25
    object_match_ratio: 0.5
    object_match_ratio_strict: 0.8
    object_use_garment_fallback: true
    require_env: true            
  env_prompts:
    - a modern office interior
    - a city street
    - a green park
    - a home interior
    - a beach
    - a mountain landscape
    - a forest
    - a desert
    - a park
    - a shopping mall

ui:
  default_k: 6
